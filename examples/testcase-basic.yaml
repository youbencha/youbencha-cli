# Test case metadata
name: "Add README comment"
description: "Tests the agent's ability to add a helpful comment explaining the repository's purpose to the README file"

# Repository configuration
repo: https://github.com/youbencha/hello-world.git
branch: main

# Agent configuration
agent:
  type: copilot-cli
  # Optional: Specify an agent name to use a custom agent from .github/agents/
  # agent_name: my-custom-agent
  config:
    prompt: "Add a comment to README explaining what this repository is about"

# Evaluators
evaluators:
  - name: git-diff
    config:
      # Optional: Specify base commit to compare against
      # Defaults to HEAD if not specified
      # base_commit: HEAD~1
      
      assertions:
        # Maximum number of files that can be changed
        # Use this to ensure focused changes (e.g., for a bug fix)
        max_files_changed: 1
        
        # Maximum number of lines added
        # Prevents overly verbose or bloated changes
        max_lines_added: 1
        
        # Maximum number of lines removed
        # Ensures refactoring doesn't delete too much code
        max_lines_removed: 0
        
        # Maximum total changes (additions + deletions)
        # Alternative to separate add/remove limits
        # max_total_changes: 100
        
        # Minimum change entropy (0.0 to log2(files_changed))
        # Enforces that changes are NOT too concentrated
        # Useful when you want changes distributed across files
        # min_change_entropy: 1.0
        
        # Maximum change entropy
        # Enforces that changes ARE concentrated in few files
        # Useful when you want focused, single-purpose changes
        max_change_entropy: 2.0

  - name: agentic-judge:basic
    config:
      type: copilot-cli
      # Optional: Set timeout in milliseconds (default: 300000 = 5 minutes)
      # timeout: 600000
      # MODE 1: Use a custom agent by name
      # Specify agent name - copilot will load the agent from .github/agents/
      agent_name: agentic-judge
      
      # MODE 2: Load instructions from a custom file
      # Specify a file path (relative to project root or absolute)
      # The file should be a markdown template with {{ASSERTIONS}} placeholder
      # instructions-file: path/to/custom-instructions.md
      
      # If neither agent nor instructions-file is specified, uses the default
      # template from src/evaluators/prompts/agentic-judge.template.md
      
      # Optional: Add a prompt that is prepended to the assertions
      # Use this to provide additional context or constraints for evaluation
      # prompt: "Do not ask for clarification. Use only the files in the repository."
      
      # Assertion keys become metric names in output (use snake_case for consistency)
      # Each assertion should be explicit and evaluable as pass/fail
      assertions:
        readme_modified: "README.md was modified. Score 1 if true, 0 if false."
        helpful_comment_added: "A helpful comment was added to README.md. Score 1 if true, 0 if false."
        grammatically_correct: "The comment added to README.md is grammatically correct. Score 1 if true, 0 if false."