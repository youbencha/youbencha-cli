#!/bin/bash
# Example pre-execution script for youBencha
# This script runs after workspace setup but before agent execution
# It can be used to modify code, inject variables, or perform setup tasks

WORKSPACE_DIR="${1:-$WORKSPACE_DIR}"

echo "Running pre-execution setup..."
echo "Workspace: $WORKSPACE_DIR"
echo "Test Case: $TEST_CASE_NAME"
echo "Repository: $REPO_URL"
echo "Branch: $BRANCH"

# Example 1: Create a configuration file with environment variables
cat > "$WORKSPACE_DIR/.env" << ENVEOF
# Auto-generated by pre-execution hook
API_KEY=${API_KEY:-default-key}
ENV=${ENV:-production}
ENVEOF

echo "Created .env file"

# Example 2: Search and replace in source files
# find "$WORKSPACE_DIR" -name "*.js" -type f -exec sed -i 's/PLACEHOLDER_API_KEY/'"$API_KEY"'/g' {} +

# Example 3: Run code generation or preprocessing
# cd "$WORKSPACE_DIR" && npm run codegen

echo "Pre-execution setup completed successfully"
exit 0
